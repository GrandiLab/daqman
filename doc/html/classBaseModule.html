<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>daqman: BaseModule Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>BaseModule Class Reference</h1><!-- doxytag: class="BaseModule" --><!-- doxytag: inherits="ParameterList" -->Abstract base module class.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="BaseModule_8hh-source.html">BaseModule.hh</a>&gt;</code>
<p>
<p>Inheritance diagram for BaseModule:
<p><center><img src="classBaseModule.png" usemap="#BaseModule_map" border="0" alt=""></center>
<map name="BaseModule_map">
<area href="classParameterList.html" alt="ParameterList" shape="rect" coords="0,56,131,80">
<area href="classVParameterNode.html" alt="VParameterNode" shape="rect" coords="0,0,131,24">
<area href="classAverageWaveforms.html" alt="AverageWaveforms" shape="rect" coords="141,168,272,192">
<area href="classChannelModule.html" alt="ChannelModule" shape="rect" coords="141,224,272,248">
<area href="classConvertData.html" alt="ConvertData" shape="rect" coords="141,280,272,304">
<area href="classGenericAnalysis.html" alt="GenericAnalysis" shape="rect" coords="141,336,272,360">
<area href="classMCArgonScintillation.html" alt="MCArgonScintillation" shape="rect" coords="141,392,272,416">
<area href="classMCLaserData.html" alt="MCLaserData" shape="rect" coords="141,448,272,472">
<area href="classMCOptical.html" alt="MCOptical" shape="rect" coords="141,504,272,528">
<area href="classMCRawWriter.html" alt="MCRawWriter" shape="rect" coords="141,560,272,584">
<area href="classPositionRecon.html" alt="PositionRecon" shape="rect" coords="141,616,272,640">
<area href="classProcessedPlotter.html" alt="ProcessedPlotter" shape="rect" coords="141,672,272,696">
<area href="classPulseFinder.html" alt="PulseFinder" shape="rect" coords="141,728,272,752">
<area href="classPulseShapeEval.html" alt="PulseShapeEval" shape="rect" coords="141,784,272,808">
<area href="classRawWriter.html" alt="RawWriter" shape="rect" coords="141,840,272,864">
<area href="classRootGraphix.html" alt="RootGraphix" shape="rect" coords="141,896,272,920">
<area href="classRootWriter.html" alt="RootWriter" shape="rect" coords="141,952,272,976">
<area href="classS1S2Evaluation.html" alt="S1S2Evaluation" shape="rect" coords="141,1008,272,1032">
<area href="classSpectrumMaker.html" alt="SpectrumMaker" shape="rect" coords="141,1064,272,1088">
<area href="classSumChannels.html" alt="SumChannels" shape="rect" coords="141,1120,272,1144">
<area href="classSumOfIntegralEval.html" alt="SumOfIntegralEval" shape="rect" coords="141,1176,272,1200">
<area href="classTriggerHistory.html" alt="TriggerHistory" shape="rect" coords="141,1232,272,1256">
<area href="classWarpVeto.html" alt="WarpVeto" shape="rect" coords="141,1288,272,1312">
</map>
<a href="classBaseModule-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="52581215f74f880cc1fa2cb3edbb39f9"></a><!-- doxytag: member="BaseModule::ChannelSkipper" ref="52581215f74f880cc1fa2cb3edbb39f9" args="" -->
typedef std::set&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#52581215f74f880cc1fa2cb3edbb39f9">ChannelSkipper</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allows one to skip processing some channels. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b06d2165529ba94d69c810b40def37e0"></a><!-- doxytag: member="BaseModule::BaseModule" ref="b06d2165529ba94d69c810b40def37e0" args="(const std::string &amp;name=&quot;&quot;, const std::string &amp;helptext=&quot;&quot;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#b06d2165529ba94d69c810b40def37e0">BaseModule</a> (const std::string &amp;name=&quot;&quot;, const std::string &amp;helptext=&quot;&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor takes module name. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3227c93689598fc23ca808a216222d80"></a><!-- doxytag: member="BaseModule::~BaseModule" ref="3227c93689598fc23ca808a216222d80" args="()" -->
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#3227c93689598fc23ca808a216222d80">~BaseModule</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">virtual desctructor <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cd03cfc65f29620904e90ab2a1b59495"></a><!-- doxytag: member="BaseModule::GetName" ref="cd03cfc65f29620904e90ab2a1b59495" args="()" -->
const std::string &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#cd03cfc65f29620904e90ab2a1b59495">GetName</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the registered name of the module (and parameter list). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ce78b67c7ba0b8b05585ded4d4fe1493"></a><!-- doxytag: member="BaseModule::SetName" ref="ce78b67c7ba0b8b05585ded4d4fe1493" args="(const std::string &amp;name)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ce78b67c7ba0b8b05585ded4d4fe1493">SetName</a> (const std::string &amp;name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the name of the module. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e36699d55824f5f17be43ba3709e177b"></a><!-- doxytag: member="BaseModule::Initialize" ref="e36699d55824f5f17be43ba3709e177b" args="()" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#e36699d55824f5f17be43ba3709e177b">Initialize</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the module before starting a run. Return 0 if no error. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="94ac83508dffcc153516bf862db40984"></a><!-- doxytag: member="BaseModule::Process" ref="94ac83508dffcc153516bf862db40984" args="(EventPtr event)=0" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#94ac83508dffcc153516bf862db40984">Process</a> (<a class="el" href="Event_8hh.html#56b05f33015aed5e05468e7319580b56">EventPtr</a> event)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a single event. Must be overridden. Return 0 if no error. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3f076a071a8d17396d27efe60253119c"></a><!-- doxytag: member="BaseModule::Finalize" ref="3f076a071a8d17396d27efe60253119c" args="()" -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#3f076a071a8d17396d27efe60253119c">Finalize</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalize state after a run has processed. Return 0 if no error. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="123a98577f12928801c518d8cdf5933d"></a><!-- doxytag: member="BaseModule::HandleEvent" ref="123a98577f12928801c518d8cdf5933d" args="(EventPtr event, bool process_now=false)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#123a98577f12928801c518d8cdf5933d">HandleEvent</a> (<a class="el" href="Event_8hh.html#56b05f33015aed5e05468e7319580b56">EventPtr</a> event, bool process_now=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called to handle things like cuts before real processing. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="653fdd63bc612df124171acfb35bfb78"></a><!-- doxytag: member="BaseModule::GetLastProcessReturn" ref="653fdd63bc612df124171acfb35bfb78" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#653fdd63bc612df124171acfb35bfb78">GetLastProcessReturn</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the return value of the last <a class="el" href="classBaseModule.html#94ac83508dffcc153516bf862db40984">Process()</a> call. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ba475058b2fb83f76c0f1646a07227ea"></a><!-- doxytag: member="BaseModule::AddDependency" ref="ba475058b2fb83f76c0f1646a07227ea" args="(const std::string &amp;module)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ba475058b2fb83f76c0f1646a07227ea">AddDependency</a> (const std::string &amp;module)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">State that we want another module to run first. <br></td></tr>
<tr><td class="memTemplParams" nowrap colspan="2"><a class="anchor" name="cfdc067348b243304869fed4f67aebec"></a><!-- doxytag: member="BaseModule::AddDependency" ref="cfdc067348b243304869fed4f67aebec" args="()" -->
template&lt;class T&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBaseModule.html#cfdc067348b243304869fed4f67aebec">AddDependency</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Keep the templated function for backward compatibility. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="74a55f9c2de2058fe4de8262da6fc48e"></a><!-- doxytag: member="BaseModule::GetDependencies" ref="74a55f9c2de2058fe4de8262da6fc48e" args="()" -->
const std::set&lt; std::string &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#74a55f9c2de2058fe4de8262da6fc48e">GetDependencies</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the list of modules which this module depends on. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="54dafe1b8e659d44d607bab3ba0a1cff"></a><!-- doxytag: member="BaseModule::AddProcessingCut" ref="54dafe1b8e659d44d607bab3ba0a1cff" args="(ProcessingCut *cut)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#54dafe1b8e659d44d607bab3ba0a1cff">AddProcessingCut</a> (<a class="el" href="classProcessingCut.html">ProcessingCut</a> *cut)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a condition to determine whether this module will process an event. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d30fa99e33bc42e467062c873aa59cec"></a><!-- doxytag: member="BaseModule::GetCuts" ref="d30fa99e33bc42e467062c873aa59cec" args="()" -->
const std::vector&lt; <a class="el" href="classProcessingCut.html">ProcessingCut</a> * &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#d30fa99e33bc42e467062c873aa59cec">GetCuts</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the list of cuts. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4f2e8976f1dadd849431de72eed66ecc"></a><!-- doxytag: member="BaseModule::ClearCuts" ref="4f2e8976f1dadd849431de72eed66ecc" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#4f2e8976f1dadd849431de72eed66ecc">ClearCuts</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear the list of cuts. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="11667219668f6085200bd94daa9343e7"></a><!-- doxytag: member="BaseModule::CheckCuts" ref="11667219668f6085200bd94daa9343e7" args="(EventPtr event)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#11667219668f6085200bd94daa9343e7">CheckCuts</a> (<a class="el" href="Event_8hh.html#56b05f33015aed5e05468e7319580b56">EventPtr</a> event)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether &lt;event&gt; passes all defined cuts. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f2ef4efef6019f9bf02c9654c724feb3"></a><!-- doxytag: member="BaseModule::enabled" ref="f2ef4efef6019f9bf02c9654c724feb3" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#f2ef4efef6019f9bf02c9654c724feb3">enabled</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">should this module be called? <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4a4ac960bb9afc2226aa2a9ea420d47e"></a><!-- doxytag: member="BaseModule::_last_process_return" ref="4a4ac960bb9afc2226aa2a9ea420d47e" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#4a4ac960bb9afc2226aa2a9ea420d47e">_last_process_return</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Value returned from last Process call. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="326fb2516d10b45fdb8cf2700d244608"></a><!-- doxytag: member="BaseModule::_dependencies" ref="326fb2516d10b45fdb8cf2700d244608" args="" -->
std::set&lt; std::string &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#326fb2516d10b45fdb8cf2700d244608">_dependencies</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list of modules we need to run first <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="786b12a9ca4d0c1059b02df55969696f"></a><!-- doxytag: member="BaseModule::_cuts" ref="786b12a9ca4d0c1059b02df55969696f" args="" -->
std::vector&lt; <a class="el" href="classProcessingCut.html">ProcessingCut</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#786b12a9ca4d0c1059b02df55969696f">_cuts</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list of cuts to take before processing <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ee9c5546b5522ab8f21696b5de495b00"></a><!-- doxytag: member="BaseModule::_skip_channels" ref="ee9c5546b5522ab8f21696b5de495b00" args="" -->
<a class="el" href="classBaseModule.html#52581215f74f880cc1fa2cb3edbb39f9">ChannelSkipper</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseModule.html#ee9c5546b5522ab8f21696b5de495b00">_skip_channels</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list of channels not to process <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Abstract base module class. 
<p>
All processing functions should inherit from <a class="el" href="classBaseModule.html">BaseModule</a>; <a class="el" href="classEventHandler.html">EventHandler</a> contains a set of <a class="el" href="classBaseModule.html">BaseModule</a> pointers.<p>
Inherited classes must override the Process function, and can optionally override the Initialize and Finalize functions. For all the templated dependency functions to work, modules must also override the const std::string GetDefaultName() function.<p>
UPDATE 2012-03-22 (bloer): Modules are no longer allowed to disable themselves during the <a class="el" href="classBaseModule.html#e36699d55824f5f17be43ba3709e177b">Initialize()</a> step. If config settings are found to have improper values, etc, the module should print an error message and return failure.<p>
Dependencies have also been updated in several ways: 1) No more templates; dependencies are specified by name. If you really want to make sure you're using the right name, call AddDependency(Module::GetDefaultName())<p>
2) The only thing the dependency mechanism does now is check that all listed dependencies are enabled after configuration. Previously, You could add "downstream" modules without explicitly adding their dependencies, e.g., you could add <a class="el" href="classIntegrator.html">Integrator</a> without first adding <a class="el" href="classBaselineFinder.html">BaselineFinder</a>, and it would automatically be added. This is no longer supported. Automated ordering of modules based on dependencies is also no longer supported. This means that it is up to the user to add modules in the right order, or things will not work! The only check that will be taken is, when you try to register a new module, if it's dependencies are not yet registered, you will get an error<p>
3) As a consequence of 2), there is no longer and such thing as an optional dependency, since that only controlled ordering previously. ALL dependencies should be declared in the constructor<p>
4) You can additionally add dependencies in the config file. This is primarily to handle auto-disabling of spectrum generators 
<p>

<p>
Definition at line <a class="el" href="BaseModule_8hh-source.html#l00060">60</a> of file <a class="el" href="BaseModule_8hh-source.html">BaseModule.hh</a>.<hr>The documentation for this class was generated from the following files:<ul>
<li>modules/include/<a class="el" href="BaseModule_8hh-source.html">BaseModule.hh</a><li>modules/src/<a class="el" href="BaseModule_8cc-source.html">BaseModule.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Jun 25 13:42:54 2013 for daqman by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
